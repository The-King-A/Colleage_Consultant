# 高考志愿助手 - 完整项目总览

## 📁 项目结构

```
Consultant/
├── Backend/                    # 后端项目（Spring Boot + LangChain4j）
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/isoft/consultant/
│   │   │   │   ├── aiservice/
│   │   │   │   │   └── ConsultantService.java      # AI服务接口
│   │   │   │   ├── config/
│   │   │   │   │   └── CommonConfig.java           # 配置类
│   │   │   │   ├── controller/
│   │   │   │   │   └── ChatController.java         # 聊天控制器
│   │   │   │   ├── repository/
│   │   │   │   │   └── RedisChatMemoryStore.java   # Redis会话存储
│   │   │   │   └── ConsultantApplication.java      # 主程序入口
│   │   │   └── resources/
│   │   │       ├── application.yaml                 # 应用配置
│   │   │       ├── system.txt                       # AI系统提示词
│   │   │       ├── content/                         # 知识库PDF文件
│   │   │       │   ├── 天坑专业top10.pdf
│   │   │       │   ├── 热门专业top20.pdf
│   │   │       │   └── [多个大学PDF文件]
│   │   │       └── static/
│   │   │           └── index.html
│   │   └── test/
│   └── pom.xml                                      # Maven依赖配置
│
└── Front/Consultant/           # 前端项目（Vue 3 + Element Plus）
    ├── public/
    │   └── favicon.ico
    ├── src/
    │   ├── api/
    │   │   └── chat.js                              # API接口封装
    │   ├── assets/
    │   │   ├── logo.svg
    │   │   └── main.css                             # 全局样式
    │   ├── components/
    │   │   └── icons/                               # 图标组件
    │   ├── router/
    │   │   └── index.js                             # 路由配置
    │   ├── stores/
    │   │   └── chat.js                              # 状态管理
    │   ├── views/
    │   │   ├── HomeView.vue                         # 首页
    │   │   ├── ChatView.vue                         # 智能问答
    │   │   └── RecommendView.vue                    # 志愿推荐
    │   ├── App.vue                                  # 根组件
    │   └── main.js                                  # 入口文件
    ├── index.html
    ├── package.json
    ├── vite.config.js
    ├── README.md                                    # 项目文档
    ├── 启动说明.md                                   # 快速启动指南
    ├── 项目说明.md                                   # 详细说明文档
    ├── 启动.bat                                     # Windows启动脚本
    └── 启动.sh                                      # Linux/Mac启动脚本
```

## 🎯 系统架构

### 后端架构（Spring Boot + LangChain4j）

```
┌─────────────────────────────────────────────────┐
│           ChatController (REST API)             │
│              GET /chat?memoryId&message         │
└────────────────────┬────────────────────────────┘
                     │
                     ▼
┌─────────────────────────────────────────────────┐
│         ConsultantService (AI Service)          │
│    - 流式对话                                    │
│    - 上下文记忆                                  │
│    - RAG检索增强                                 │
└────────────────────┬────────────────────────────┘
                     │
        ┌────────────┴────────────┐
        ▼                         ▼
┌──────────────────┐    ┌──────────────────┐
│  OpenAI ChatModel│    │  Content Retriever│
│  (通义千问 Plus)  │    │  (向量数据库检索)  │
└──────────────────┘    └──────────────────┘
        │                         │
        ▼                         ▼
┌──────────────────┐    ┌──────────────────┐
│  Redis Memory    │    │   PDF Documents  │
│  (会话记忆存储)   │    │   (院校/专业知识) │
└──────────────────┘    └──────────────────┘
```

### 前端架构（Vue 3）

```
┌─────────────────────────────────────────────────┐
│                    App.vue                       │
│              (导航栏 + 路由出口)                  │
└────────────────────┬────────────────────────────┘
                     │
        ┌────────────┼────────────┐
        ▼            ▼            ▼
┌──────────┐  ┌──────────┐  ┌──────────┐
│ HomeView │  │ ChatView │  │Recommend │
│  (首页)  │  │(智能问答)│  │ (志愿推荐)│
└──────────┘  └────┬─────┘  └────┬─────┘
                   │              │
                   ▼              ▼
            ┌─────────────────────────┐
            │   API Service (chat.js) │
            │   - chatStream (流式)    │
            │   - axios (HTTP)        │
            └────────────┬────────────┘
                        │
                        ▼
            ┌─────────────────────────┐
            │   Backend API           │
            │   GET /chat             │
            └─────────────────────────┘
                        │
                        ▼
            ┌─────────────────────────┐
            │   Pinia Store           │
            │   - memoryId            │
            │   - chatHistory         │
            └─────────────────────────┘
```

## 🚀 快速启动

### 前提条件

1. **Java 环境**: JDK 17+
2. **Node.js**: >= 20.19.0
3. **Redis**: 本地运行在 6379 端口
4. **阿里云API Key**: 通义千问 API 密钥

### 第一步：启动后端

1. 进入后端目录：
   ```bash
   cd Backend
   ```

2. 配置 API Key：
   - 编辑 `src/main/resources/application.yaml`
   - 将 `${API-KEY}` 替换为你的阿里云API密钥

3. 确保 Redis 已启动：
   ```bash
   redis-server
   ```

4. 运行后端：
   ```bash
   # 使用 Maven
   mvn spring-boot:run
   
   # 或者运行已构建的 jar
   java -jar target/consultant-0.0.1-SNAPSHOT.jar
   ```

5. 验证：访问 `http://localhost:8080`

### 第二步：启动前端

#### 方式一：使用启动脚本（推荐）

**Windows**:
```bash
cd Front\Consultant
双击 启动.bat
```

**Linux/Mac**:
```bash
cd Front/Consultant
chmod +x 启动.sh
./启动.sh
```

#### 方式二：手动启动

```bash
cd Front/Consultant

# 安装依赖
npm install

# 启动开发服务器
npm run dev
```

### 第三步：访问应用

在浏览器中打开：`http://localhost:5173`

## 🎨 功能模块

### 1️⃣ 智能问答模块

**页面路径**: `/chat`

**核心功能**:
- ✅ 实时AI对话（支持流式响应）
- ✅ 快速提问标签
- ✅ 对话历史保存
- ✅ 上下文记忆
- ✅ 清空对话

**支持的查询类型**:
1. 院校简介查询
2. 录取规则查询
3. 奖学金设置查询
4. 食宿条件查询
5. 招生联系方式查询
6. 历年录取分数查询
7. 热门专业查询
8. 天坑专业查询
9. 院校/专业推荐
10. 一对一咨询预约

**示例问题**:
- "介绍一下西安交通大学"
- "西安交通大学的录取规则是什么？"
- "有哪些热门专业？"
- "我考了600分，陕西理科，能推荐一些学校吗？"

### 2️⃣ 志愿推荐模块

**页面路径**: `/recommend`

**核心功能**:
- ✅ 考生信息表单
- ✅ 表单验证
- ✅ 智能推荐方案
- ✅ 冲稳保策略

**填写内容**:
- 考生姓名
- 考生性别
- 所在省份（31个省市）
- 高考分数（0-750）
- 科目类型（理科/文科/综合）
- 意向专业方向（20+专业类别，可多选）
- 意向地区（7大地区，可多选）
- 其他要求（可选）

**推荐结果包含**:
- 推荐院校列表
- 推荐专业列表
- 历年录取分数
- 专业热度分析
- 冲稳保策略建议

### 3️⃣ 首页模块

**页面路径**: `/`

**展示内容**:
- 系统功能介绍
- 核心功能卡片
- 服务统计数据
- 快速导航按钮

## 🔧 技术栈详情

### 后端技术

| 技术 | 版本 | 用途 |
|------|------|------|
| Spring Boot | 3.x | Web框架 |
| LangChain4j | 最新 | AI集成框架 |
| 通义千问 | qwen-plus | 大语言模型 |
| Redis | 7.x | 会话存储 |
| Maven | 3.x | 构建工具 |

### 前端技术

| 技术 | 版本 | 用途 |
|------|------|------|
| Vue.js | 3.5.22 | 前端框架 |
| Vite | 7.1.7 | 构建工具 |
| Element Plus | 2.5.4 | UI组件库 |
| Vue Router | 4.2.5 | 路由管理 |
| Pinia | 2.1.7 | 状态管理 |
| Axios | 1.6.5 | HTTP客户端 |

## 📊 数据流程

### 智能问答流程

```
用户输入问题
    ↓
前端生成/使用 memoryId
    ↓
发送 GET 请求到 /chat
    ↓
后端接收请求
    ↓
从 Redis 加载对话历史
    ↓
从向量数据库检索相关知识
    ↓
构建完整提示词
    ↓
调用通义千问API（流式）
    ↓
逐块返回响应
    ↓
前端实时显示
    ↓
保存对话到 Redis
```

### 志愿推荐流程

```
用户填写表单
    ↓
前端验证表单
    ↓
构建推荐请求消息
    ↓
生成新的 memoryId
    ↓
调用 /chat 接口
    ↓
后端分析考生信息
    ↓
检索匹配的院校和专业
    ↓
应用冲稳保策略
    ↓
生成推荐方案
    ↓
流式返回结果
    ↓
前端展示推荐方案
```

## 🎯 核心特性

### 1. 流式响应处理

前端使用 Fetch API 的 ReadableStream 处理流式数据：

```javascript
const reader = response.body.getReader()
const decoder = new TextDecoder('utf-8')

while (true) {
  const { done, value } = await reader.read()
  if (done) break
  
  const text = decoder.decode(value, { stream: true })
  // 实时更新UI
  onMessage(text)
}
```

### 2. 会话记忆管理

- 每个用户分配唯一的 `memoryId`
- Redis 存储对话历史
- 支持连续对话上下文
- 可清空重置会话

### 3. RAG 检索增强

- 向量化存储院校/专业知识
- 语义检索相关内容
- 增强AI回答准确性

### 4. 响应式设计

- 支持桌面、平板、手机
- 自适应布局
- 触摸友好交互

## 📝 配置说明

### 后端配置

**application.yaml**:
```yaml
langchain4j:
  open-ai:
    chat-model:
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1
      api-key: ${API-KEY}  # 需要配置
      model-name: qwen-plus
    embedding-model:
      model-name: text-embedding-v3
  community:
    redis:
      host: localhost
      port: 6379
```

### 前端配置

**src/api/chat.js**:
```javascript
const request = axios.create({
  baseURL: 'http://localhost:8080',  // 后端地址
  timeout: 60000
})
```

## 🐛 常见问题

### 后端问题

1. **Redis 连接失败**
   - 确保 Redis 已启动
   - 检查端口 6379 是否可用
   - 查看防火墙设置

2. **API Key 无效**
   - 确认阿里云API密钥正确
   - 检查账户余额
   - 验证网络连接

3. **PDF 加载失败**
   - 确认 PDF 文件在 resources/content/ 目录
   - 检查文件权限

### 前端问题

1. **依赖安装失败**
   - 使用国内镜像：`npm install --registry=https://registry.npmmirror.com`
   - 清除缓存：`npm cache clean --force`

2. **无法连接后端**
   - 确认后端已启动
   - 检查端口 8080
   - 查看浏览器控制台错误

3. **流式响应不显示**
   - 检查浏览器兼容性
   - 查看网络请求状态
   - 确认后端返回格式

## 📚 部署建议

### 开发环境
- 前端：`npm run dev` (Vite开发服务器)
- 后端：`mvn spring-boot:run` (热重载)
- Redis：本地实例

### 生产环境
- 前端：
  ```bash
  npm run build
  # 将 dist/ 目录部署到 Nginx/Apache
  ```
- 后端：
  ```bash
  mvn clean package
  java -jar target/consultant-0.0.1-SNAPSHOT.jar
  ```
- Redis：生产级配置，启用持久化

### Docker 部署（可选）
可以为前后端分别创建 Docker 镜像，使用 Docker Compose 编排。

## 🎓 学习建议

### 前端学习路径
1. Vue 3 Composition API
2. Vite 构建工具
3. Element Plus 组件库
4. Pinia 状态管理
5. 流式数据处理

### 后端学习路径
1. Spring Boot 基础
2. LangChain4j 框架
3. RAG 检索增强生成
4. Redis 使用
5. 向量数据库

## 📞 技术支持

如有问题，可以：
1. 查看项目文档
2. 检查日志输出
3. 查阅官方文档
4. 提交 Issue

## 🎉 总结

本项目是一个完整的高考志愿填报助手系统，包含：

✅ **后端**: Spring Boot + LangChain4j + AI大模型  
✅ **前端**: Vue 3 + Element Plus + 现代化UI  
✅ **功能**: 智能问答 + 志愿推荐  
✅ **特性**: 流式响应 + 上下文记忆 + RAG检索  
✅ **体验**: 响应式设计 + 流畅动画 + 友好交互  

**立即开始使用，为考生提供专业的志愿填报服务！** 🎓

---

**创建时间**: 2025年10月6日  
**版本**: v1.0.0  
**作者**: AI助手  
**组织**: 传智教育

